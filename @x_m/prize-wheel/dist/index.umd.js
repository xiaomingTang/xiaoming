(function(n,g){typeof exports=="object"&&typeof module!="undefined"?g(exports,require("@babel/runtime-corejs3/core-js-stable/reflect/construct"),require("core-js/modules/es.object.to-string.js"),require("@babel/runtime-corejs3/helpers/classCallCheck"),require("@babel/runtime-corejs3/helpers/createClass"),require("@babel/runtime-corejs3/helpers/assertThisInitialized"),require("@babel/runtime-corejs3/helpers/inherits"),require("@babel/runtime-corejs3/helpers/possibleConstructorReturn"),require("@babel/runtime-corejs3/helpers/getPrototypeOf"),require("@babel/runtime-corejs3/helpers/defineProperty"),require("@x_m/event-emitter"),require("@babel/runtime-corejs3/helpers/slicedToArray"),require("react"),require("lodash-es")):typeof define=="function"&&define.amd?define(["exports","@babel/runtime-corejs3/core-js-stable/reflect/construct","core-js/modules/es.object.to-string.js","@babel/runtime-corejs3/helpers/classCallCheck","@babel/runtime-corejs3/helpers/createClass","@babel/runtime-corejs3/helpers/assertThisInitialized","@babel/runtime-corejs3/helpers/inherits","@babel/runtime-corejs3/helpers/possibleConstructorReturn","@babel/runtime-corejs3/helpers/getPrototypeOf","@babel/runtime-corejs3/helpers/defineProperty","@x_m/event-emitter","@babel/runtime-corejs3/helpers/slicedToArray","react","lodash-es"],g):(n=typeof globalThis!="undefined"?globalThis:n||self,g(n.PrizeWheel={},n._Reflect$construct,null,n._classCallCheck,n._createClass,n._assertThisInitialized,n._inherits,n._possibleConstructorReturn,n._getPrototypeOf,n._defineProperty,n.EventEmitter,n._slicedToArray,n.react,n.lodashEs))})(this,function(n,g,N,R,A,T,C,P,q,k,z,L,m,S){"use strict";const o=r=>r&&typeof r=="object"&&"default"in r?r:{default:r},p=o(g),V=o(R),O=o(A),l=o(T),E=o(C),I=o(P),v=o(q),d=o(k),W=o(z),D=o(L);function _(r){var c=r.currentTime,a=r.targetTime,t=r.startValue,s=r.endValue,u=S.clamp(c/(a/2),0,2),i=s-t;return u<1?t+i/2*u*u:(u-=1,t-i/2*(u*(u-2)-1))}function $(r){var c=m.useState(-1),a=D.default(c,2),t=a[0],s=a[1],u=m.useState(!1),i=D.default(u,2),h=i[0],e=i[1];return m.useEffect(function(){if(!r)return S.noop;var f=function(){e(!0)},b=function(){s(r.deg)},j=function(){e(!1)};return r.addListener("start",f),r.addListener("running",b),r.addListener("end",j),function(){r.removeListener("start",f),r.removeListener("running",b),r.removeListener("end",j)}},[r]),{deg:t,running:h}}function x(r){var c=M();return function(){var t=v.default(r),s;if(c){var u=v.default(this).constructor;s=p.default(t,arguments,u)}else s=t.apply(this,arguments);return I.default(this,s)}}function M(){if(typeof Reflect=="undefined"||!p.default||p.default.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(p.default(Boolean,[],function(){})),!0}catch(r){return!1}}var B=function(r){E.default(a,r);var c=x(a);function a(t){var s,u,i,h,e;return V.default(this,a),e=c.call(this),d.default(l.default(e),"rawDeg",-1),d.default(l.default(e),"speedRatio",5),d.default(l.default(e),"minRunningDeg",3600),d.default(l.default(e),"easeStartDeg",540),d.default(l.default(e),"easeStopDeg",540),d.default(l.default(e),"rawRunning",!1),d.default(l.default(e),"shouldStopAtDeg",-1),d.default(l.default(e),"animate",function(){if(!!e.running){var f;e.shouldStopAtDeg>=0&&e.deg-(e.shouldStopAtDeg-e.easeStopDeg)>=0?f=_({currentTime:e.deg-(e.shouldStopAtDeg-e.easeStopDeg),targetTime:e.easeStopDeg,startValue:1,endValue:.1}):f=_({currentTime:e.deg,targetTime:e.easeStartDeg,startValue:.1,endValue:1}),e.deg+=f*e.speedRatio,e.shouldStopAtDeg>=0&&(e.deg=Math.min(e.shouldStopAtDeg,e.deg)),e.shouldStopAtDeg<0||e.deg<e.shouldStopAtDeg?window.requestAnimationFrame(e.animate):e.end()}}),e.easeStartDeg=(s=t==null?void 0:t.easeStartDeg)!==null&&s!==void 0?s:e.easeStartDeg,e.easeStopDeg=(u=t==null?void 0:t.easeStopDeg)!==null&&u!==void 0?u:e.easeStopDeg,e.minRunningDeg=(i=t==null?void 0:t.minRunningDeg)!==null&&i!==void 0?i:e.minRunningDeg,e.speedRatio=(h=t==null?void 0:t.speedRatio)!==null&&h!==void 0?h:e.speedRatio,e}return O.default(a,[{key:"deg",get:function(){return this.rawDeg},set:function(s){this.rawDeg=s,this.emit("running")}},{key:"running",get:function(){return this.rawRunning},set:function(s){s!==this.rawRunning&&this.emit(s?"start":"end"),this.rawRunning=s}},{key:"run",value:function(){this.shouldStopAtDeg=-1,this.running||(this.running=!0,this.deg=-1,this.animate())}},{key:"reset",value:function(){this.shouldStopAtDeg=-1,this.deg=-1,this.running=!1}},{key:"end",value:function(){this.running=!1}},{key:"shouldStopAt",value:function(s){var u=(s%360+360)%360;this.shouldStopAtDeg=Math.max(this.deg+this.easeStopDeg,this.minRunningDeg);var i=u-this.shouldStopAtDeg%360;this.shouldStopAtDeg+=i>=0?i:i+360}}]),a}(W.default);n.PrizeWheelLogic=B,n.easeInOutQuad=_,n.usePrizeWheelState=$,Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=index.umd.js.map
