(function(r,c){typeof exports=="object"&&typeof module!="undefined"?c(exports,require("@babel/runtime-corejs3/core-js-stable/reflect/construct"),require("core-js/modules/es.object.to-string.js"),require("@babel/runtime-corejs3/helpers/classCallCheck"),require("@babel/runtime-corejs3/helpers/createClass"),require("@babel/runtime-corejs3/helpers/assertThisInitialized"),require("@babel/runtime-corejs3/helpers/inherits"),require("@babel/runtime-corejs3/helpers/possibleConstructorReturn"),require("@babel/runtime-corejs3/helpers/getPrototypeOf"),require("@babel/runtime-corejs3/helpers/defineProperty"),require("@x_m/event-emitter"),require("lodash/clamp")):typeof define=="function"&&define.amd?define(["exports","@babel/runtime-corejs3/core-js-stable/reflect/construct","core-js/modules/es.object.to-string.js","@babel/runtime-corejs3/helpers/classCallCheck","@babel/runtime-corejs3/helpers/createClass","@babel/runtime-corejs3/helpers/assertThisInitialized","@babel/runtime-corejs3/helpers/inherits","@babel/runtime-corejs3/helpers/possibleConstructorReturn","@babel/runtime-corejs3/helpers/getPrototypeOf","@babel/runtime-corejs3/helpers/defineProperty","@x_m/event-emitter","lodash/clamp"],c):(r=typeof globalThis!="undefined"?globalThis:r||self,c(r.XM_PrizeWheel={},r._Reflect$construct,null,r._classCallCheck,r._createClass,r._assertThisInitialized,r._inherits,r._possibleConstructorReturn,r._getPrototypeOf,r._defineProperty,r.EventEmitter,r.clamp))})(this,function(r,c,$,D,v,S,b,j,y,R,C,T){"use strict";const i=s=>s&&typeof s=="object"&&"default"in s?s:{default:s},h=i(c),A=i(D),P=i(v),l=i(S),q=i(b),k=i(j),_=i(y),o=i(R),w=i(C),V=i(T);function g(s){var f=s.currentTime,d=s.targetTime,t=s.startValue,n=s.endValue,u=V.default(f/(d/2),0,2),a=n-t;return u<1?t+a/2*u*u:(u-=1,t-a/2*(u*(u-2)-1))}function z(s){var f=O();return function(){var t=_.default(s),n;if(f){var u=_.default(this).constructor;n=h.default(t,arguments,u)}else n=t.apply(this,arguments);return k.default(this,n)}}function O(){if(typeof Reflect=="undefined"||!h.default||h.default.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(h.default(Boolean,[],function(){})),!0}catch(s){return!1}}var I=function(s){q.default(d,s);var f=z(d);function d(t){var n,u,a,p,e;return A.default(this,d),e=f.call(this),o.default(l.default(e),"rawDeg",-1),o.default(l.default(e),"speedRatio",5),o.default(l.default(e),"minRunningDeg",3600),o.default(l.default(e),"easeStartDeg",540),o.default(l.default(e),"easeStopDeg",540),o.default(l.default(e),"rawRunning",!1),o.default(l.default(e),"shouldStopAtDeg",-1),o.default(l.default(e),"animate",function(){if(!!e.running){var m;e.shouldStopAtDeg>=0&&e.deg-(e.shouldStopAtDeg-e.easeStopDeg)>=0?m=g({currentTime:e.deg-(e.shouldStopAtDeg-e.easeStopDeg),targetTime:e.easeStopDeg,startValue:1,endValue:.1}):m=g({currentTime:e.deg,targetTime:e.easeStartDeg,startValue:.1,endValue:1}),e.deg+=m*e.speedRatio,e.shouldStopAtDeg>=0&&(e.deg=Math.min(e.shouldStopAtDeg,e.deg)),e.shouldStopAtDeg<0||e.deg<e.shouldStopAtDeg?typeof window!="undefined"?requestAnimationFrame(e.animate):setTimeout(e.animate,0):e.end()}}),e.easeStartDeg=(n=t==null?void 0:t.easeStartDeg)!==null&&n!==void 0?n:e.easeStartDeg,e.easeStopDeg=(u=t==null?void 0:t.easeStopDeg)!==null&&u!==void 0?u:e.easeStopDeg,e.minRunningDeg=(a=t==null?void 0:t.minRunningDeg)!==null&&a!==void 0?a:e.minRunningDeg,e.speedRatio=(p=t==null?void 0:t.speedRatio)!==null&&p!==void 0?p:e.speedRatio,e}return P.default(d,[{key:"deg",get:function(){return this.rawDeg},set:function(n){this.rawDeg=n,this.emit("running")}},{key:"running",get:function(){return this.rawRunning},set:function(n){this.rawRunning=n,n!==this.rawRunning&&this.emit(n?"start":"end")}},{key:"run",value:function(){this.shouldStopAtDeg=-1,this.running||(this.running=!0,this.deg=-1,this.animate())}},{key:"reset",value:function(){this.shouldStopAtDeg=-1,this.deg=-1,this.running=!1}},{key:"end",value:function(){this.running=!1}},{key:"shouldStopAt",value:function(n){var u=(n%360+360)%360;this.shouldStopAtDeg=Math.max(this.deg+this.easeStopDeg,this.minRunningDeg);var a=u-this.shouldStopAtDeg%360;this.shouldStopAtDeg+=a>=0?a:a+360}}]),d}(w.default);r.PrizeWheel=I,r.easeInOutQuad=g,Object.defineProperties(r,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
