(function(a,x){typeof exports=="object"&&typeof module!="undefined"?module.exports=x(require("@babel/runtime-corejs3/core-js-stable/reflect/construct"),require("core-js/modules/es.object.to-string.js"),require("@babel/runtime-corejs3/helpers/classCallCheck"),require("@babel/runtime-corejs3/helpers/createClass"),require("@babel/runtime-corejs3/helpers/assertThisInitialized"),require("@babel/runtime-corejs3/helpers/inherits"),require("@babel/runtime-corejs3/helpers/possibleConstructorReturn"),require("@babel/runtime-corejs3/helpers/getPrototypeOf"),require("@babel/runtime-corejs3/helpers/defineProperty"),require("@babel/runtime-corejs3/core-js-stable/instance/concat"),require("@babel/runtime-corejs3/core-js-stable/instance/includes"),require("gl-matrix"),require("@x_m/interact"),require("@x_m/event-emitter")):typeof define=="function"&&define.amd?define(["@babel/runtime-corejs3/core-js-stable/reflect/construct","core-js/modules/es.object.to-string.js","@babel/runtime-corejs3/helpers/classCallCheck","@babel/runtime-corejs3/helpers/createClass","@babel/runtime-corejs3/helpers/assertThisInitialized","@babel/runtime-corejs3/helpers/inherits","@babel/runtime-corejs3/helpers/possibleConstructorReturn","@babel/runtime-corejs3/helpers/getPrototypeOf","@babel/runtime-corejs3/helpers/defineProperty","@babel/runtime-corejs3/core-js-stable/instance/concat","@babel/runtime-corejs3/core-js-stable/instance/includes","gl-matrix","@x_m/interact","@x_m/event-emitter"],x):(a=typeof globalThis!="undefined"?globalThis:a||self,a.XM_PrizeWheelHelper=x(a._Reflect$construct,null,a._classCallCheck,a._createClass,a._assertThisInitialized,a._inherits,a._possibleConstructorReturn,a._getPrototypeOf,a._defineProperty,a._concatInstanceProperty,a._includesInstanceProperty,a.glMatrix,a.interact,a.EventEmitter))})(this,function(a,x,w,E,L,S,z,D,M,A,B,j,I,$){"use strict";const u=f=>f&&typeof f=="object"&&"default"in f?f:{default:f},T=u(a),F=u(w),N=u(E),o=u(L),W=u(S),H=u(z),O=u(D),d=u(M),v=u(A),g=u(B),X=u($);function G(f){var C=J();return function(){var c=O.default(f),e;if(C){var t=O.default(this).constructor;e=T.default(c,arguments,t)}else e=c.apply(this,arguments);return H.default(this,e)}}function J(){if(typeof Reflect=="undefined"||!T.default||T.default.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(T.default(Boolean,[],function(){})),!0}catch(f){return!1}}var K=function(f){W.default(b,f);var C=G(b);function b(){var c,e;F.default(this,b);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=C.call.apply(C,v.default(c=[this]).call(c,r)),d.default(o.default(e),"element",null),d.default(o.default(e),"originTranslate",{x:0,y:0}),d.default(o.default(e),"onMove",function(){for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];var h=s[0];j.mat3.multiply(e.matrix,[1,0,0,0,1,0,h.x,h.y,1],e.matrix),e.emit("change",o.default(e))}),d.default(o.default(e),"onRotate",function(){for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];var h=s[0],m=h.ratio,y=h.center,p=Math.cos(m),_=Math.sin(m),q=e.originTranslate,Q=q.x,U=q.y,P=-(y.x-Q),R=-(y.y-U);j.mat3.multiply(e.matrix,[p,_,0,-_,p,0,P*p-R*_-P,P*_+R*p-R,1],e.matrix),e.emit("change",o.default(e))}),d.default(o.default(e),"onScale",function(){for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];var h=s[0],m=h.ratio,y=h.center,p=e.originTranslate,_=p.x,q=p.y;j.mat3.multiply(e.matrix,[m,0,0,0,m,0,(y.x-_)*(1-m),(y.y-q)*(1-m),1],e.matrix),e.emit("change",o.default(e))}),d.default(o.default(e),"matrix",j.mat3.create()),d.default(o.default(e),"mouseFormatter",void 0),d.default(o.default(e),"touchFormatter",void 0),e}return N.default(b,[{key:"setOriginTranslate",value:function(e){this.originTranslate.x=e.x,this.originTranslate.y=e.y}},{key:"setOriginTranslateFromDomRect",value:function(e){var t=e.x,r=e.y,n=e.width,i=e.height;this.originTranslate={x:t+n/2,y:r+i/2}}},{key:"setOriginTranslateFromElement",value:function(e){var t=e.getBoundingClientRect(),r=t.x,n=t.y,i=t.width,s=t.height;this.originTranslate={x:r+i/2,y:n+s/2}}},{key:"attach",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["mouse","touch"];if(!e){console.error("[interact-dom]: element is required");return}if(this.element=e,this.setOriginTranslateFromElement(e),g.default(t).call(t,"mouse")){var r=new I.MouseFormatter({disabledWhenFiresTouchEvents:g.default(t).call(t,"touch")});r.attach(e),r.addListener("move",this.onMove),r.addListener("rotate",this.onRotate),r.addListener("scale",this.onScale),this.mouseFormatter=r}if(g.default(t).call(t,"mouse")){var n=new I.TouchFormatter;n.attach(e),n.addListener("move",this.onMove),n.addListener("rotate",this.onRotate),n.addListener("scale",this.onScale),this.touchFormatter=n}}},{key:"detach",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["mouse","touch"];if(g.default(e).call(e,"mouse")){var t;(t=this.mouseFormatter)===null||t===void 0||t.detach()}if(g.default(e).call(e,"touch")){var r;(r=this.touchFormatter)===null||r===void 0||r.detach()}}},{key:"formatToCss",value:function(){var e,t,r,n,i,s=this.matrix;return v.default(e=v.default(t=v.default(r=v.default(n=v.default(i="matrix(".concat(s[0],",")).call(i,s[1],",")).call(n,s[3],",")).call(r,s[4],",")).call(t,s[6],",")).call(e,s[7],")")}}]),b}(X.default);return K});
