(function(a,x){typeof exports=="object"&&typeof module!="undefined"?module.exports=x(require("@babel/runtime-corejs3/core-js-stable/reflect/construct"),require("core-js/modules/es.object.to-string.js"),require("@babel/runtime-corejs3/helpers/classCallCheck"),require("@babel/runtime-corejs3/helpers/createClass"),require("@babel/runtime-corejs3/helpers/assertThisInitialized"),require("@babel/runtime-corejs3/helpers/inherits"),require("@babel/runtime-corejs3/helpers/possibleConstructorReturn"),require("@babel/runtime-corejs3/helpers/getPrototypeOf"),require("@babel/runtime-corejs3/helpers/defineProperty"),require("@babel/runtime-corejs3/core-js-stable/instance/concat"),require("@babel/runtime-corejs3/core-js-stable/instance/includes"),require("gl-matrix"),require("@x_m/interact"),require("@x_m/event-emitter")):typeof define=="function"&&define.amd?define(["@babel/runtime-corejs3/core-js-stable/reflect/construct","core-js/modules/es.object.to-string.js","@babel/runtime-corejs3/helpers/classCallCheck","@babel/runtime-corejs3/helpers/createClass","@babel/runtime-corejs3/helpers/assertThisInitialized","@babel/runtime-corejs3/helpers/inherits","@babel/runtime-corejs3/helpers/possibleConstructorReturn","@babel/runtime-corejs3/helpers/getPrototypeOf","@babel/runtime-corejs3/helpers/defineProperty","@babel/runtime-corejs3/core-js-stable/instance/concat","@babel/runtime-corejs3/core-js-stable/instance/includes","gl-matrix","@x_m/interact","@x_m/event-emitter"],x):(a=typeof globalThis!="undefined"?globalThis:a||self,a.XM_PrizeWheelHelper=x(a._Reflect$construct,null,a._classCallCheck,a._createClass,a._assertThisInitialized,a._inherits,a._possibleConstructorReturn,a._getPrototypeOf,a._defineProperty,a._concatInstanceProperty,a._includesInstanceProperty,a.glMatrix,a.interact,a.EventEmitter))})(this,function(a,x,w,E,L,S,z,D,M,A,B,j,I,$){"use strict";const l=f=>f&&typeof f=="object"&&"default"in f?f:{default:f},T=l(a),F=l(w),N=l(E),c=l(L),W=l(S),H=l(z),O=l(D),h=l(M),v=l(A),_=l(B),X=l($);function G(f){var C=J();return function(){var o=O.default(f),e;if(C){var t=O.default(this).constructor;e=T.default(o,arguments,t)}else e=o.apply(this,arguments);return H.default(this,e)}}function J(){if(typeof Reflect=="undefined"||!T.default||T.default.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(T.default(Boolean,[],function(){})),!0}catch(f){return!1}}var K=function(f){W.default(y,f);var C=G(y);function y(){var o,e;F.default(this,y);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=C.call.apply(C,v.default(o=[this]).call(o,r)),h.default(c.default(e),"originTranslate",{x:0,y:0}),h.default(c.default(e),"onMove",function(){for(var u=arguments.length,s=new Array(u),i=0;i<u;i++)s[i]=arguments[i];var d=s[0];j.mat3.multiply(e.matrix,[1,0,0,0,1,0,d.x,d.y,1],e.matrix),e.emit("change",c.default(e))}),h.default(c.default(e),"onRotate",function(){for(var u=arguments.length,s=new Array(u),i=0;i<u;i++)s[i]=arguments[i];var d=s[0],m=d.ratio,g=d.center,p=Math.cos(m),b=Math.sin(m),q=e.originTranslate,Q=q.x,U=q.y,P=-(g.x-Q),R=-(g.y-U);j.mat3.multiply(e.matrix,[p,b,0,-b,p,0,P*p-R*b-P,P*b+R*p-R,1],e.matrix),e.emit("change",c.default(e))}),h.default(c.default(e),"onScale",function(){for(var u=arguments.length,s=new Array(u),i=0;i<u;i++)s[i]=arguments[i];var d=s[0],m=d.ratio,g=d.center,p=e.originTranslate,b=p.x,q=p.y;j.mat3.multiply(e.matrix,[m,0,0,0,m,0,(g.x-b)*(1-m),(g.y-q)*(1-m),1],e.matrix),e.emit("change",c.default(e))}),h.default(c.default(e),"matrix",j.mat3.create()),h.default(c.default(e),"mouseFormatter",void 0),h.default(c.default(e),"touchFormatter",void 0),e}return N.default(y,[{key:"setOriginTranslate",value:function(e){this.originTranslate.x=e.x,this.originTranslate.y=e.y}},{key:"setOriginTranslateFromDomRect",value:function(e){var t=e.x,r=e.y,n=e.width,u=e.height;this.originTranslate={x:t+n/2,y:r+u/2}}},{key:"setOriginTranslateFromElement",value:function(e){var t=e.style.transform;e.style.transform="";var r=e.getBoundingClientRect(),n=r.x,u=r.y,s=r.width,i=r.height;this.originTranslate={x:n+s/2,y:u+i/2},e.style.transform=t}},{key:"attach",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["mouse","touch"];if(!e){console.error("[interact-dom]: element is required");return}if(this.setOriginTranslateFromElement(e),_.default(t).call(t,"mouse")){var r=new I.MouseFormatter({disabledWhenFiresTouchEvents:_.default(t).call(t,"touch")});r.attach(e),r.addListener("move",this.onMove),r.addListener("rotate",this.onRotate),r.addListener("scale",this.onScale),this.mouseFormatter=r}if(_.default(t).call(t,"mouse")){var n=new I.TouchFormatter;n.attach(e),n.addListener("move",this.onMove),n.addListener("rotate",this.onRotate),n.addListener("scale",this.onScale),this.touchFormatter=n}}},{key:"detach",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["mouse","touch"];if(_.default(e).call(e,"mouse")){var t;(t=this.mouseFormatter)===null||t===void 0||t.detach()}if(_.default(e).call(e,"touch")){var r;(r=this.touchFormatter)===null||r===void 0||r.detach()}}},{key:"formatToCss",value:function(){var e,t,r,n,u,s=this.matrix;return v.default(e=v.default(t=v.default(r=v.default(n=v.default(u="matrix(".concat(s[0],",")).call(u,s[1],",")).call(n,s[3],",")).call(r,s[4],",")).call(t,s[6],",")).call(e,s[7],")")}}]),y}(X.default);return K});
