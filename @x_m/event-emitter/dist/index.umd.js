(function(s,c){typeof exports=="object"&&typeof module!="undefined"?module.exports=c(require("@babel/runtime-corejs3/helpers/classCallCheck"),require("@babel/runtime-corejs3/helpers/createClass"),require("@babel/runtime-corejs3/helpers/defineProperty"),require("@babel/runtime-corejs3/core-js-stable/instance/find-index"),require("@babel/runtime-corejs3/core-js-stable/instance/filter")):typeof define=="function"&&define.amd?define(["@babel/runtime-corejs3/helpers/classCallCheck","@babel/runtime-corejs3/helpers/createClass","@babel/runtime-corejs3/helpers/defineProperty","@babel/runtime-corejs3/core-js-stable/instance/find-index","@babel/runtime-corejs3/core-js-stable/instance/filter"],c):(s=typeof globalThis!="undefined"?globalThis:s||self,s.XM_EventEmitter=c(s._classCallCheck,s._createClass,s._defineProperty,s._findIndexInstanceProperty,s._filterInstanceProperty))})(this,function(s,c,p,h,b){"use strict";const u=n=>n&&typeof n=="object"&&"default"in n?n:{default:n},v=u(s),_=u(c),m=u(p),M=u(h),o=u(b);var j=function(){function n(){v.default(this,n),m.default(this,"eventsMap",{})}return _.default(n,[{key:"addListener",value:function(e,a,r){var i;this.eventsMap[e]||(this.eventsMap[e]=[]);var f=(i=r==null?void 0:r.times)!==null&&i!==void 0?i:1/0,l=this.eventsMap[e],t=M.default(l).call(l,function(y){return y.callback===a});return t>=0?l[t].times=f:l.push({callback:a,times:f}),this}},{key:"removeListener",value:function(e,a){if(this.eventsMap[e])if(a){var r;this.eventsMap[e]=o.default(r=this.eventsMap[e]).call(r,function(i){return i.callback!==a})}else this.eventsMap[e]=[];return this}},{key:"emit",value:function(e){for(var a=arguments.length,r=new Array(a>1?a-1:0),i=1;i<a;i++)r[i-1]=arguments[i];if(this.eventsMap.BUILT_IN_EMIT){var f;this.eventsMap.BUILT_IN_EMIT=o.default(f=this.eventsMap.BUILT_IN_EMIT).call(f,function(t){return t.times>0&&(t.callback({type:e,args:r}),t.times-=1),t.times>0})}if(this.eventsMap[e]){var l;this.eventsMap[e]=o.default(l=this.eventsMap[e]).call(l,function(t){return t.times>0&&(t.callback.apply(t,r),t.times-=1),t.times>0})}return this}}]),n}();return j});
